(this.webpackJsonpcleverod_test=this.webpackJsonpcleverod_test||[]).push([[0],{103:function(e,t,n){e.exports=n(147)},130:function(e,t,n){},131:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=n.n(c),u=n(21),i=n(29),s=n(17),l=n(187),p=n(194),m=n(198),f=function(e){var t=e.form,n=e.onChange,a=e.onBlur,c=e.onSubmit,o=e.children,u={variant:"outlined",margin:"normal",fullWidth:!0},i=function(e){return e.prefix?{startAdornment:r.a.createElement(m.a,{position:"start"},e.prefix)}:null};return r.a.createElement("form",{onSubmit:c},Object.keys(t).map((function(e){var c=t[e];return c.hidden?null:r.a.createElement(p.a,Object.assign({key:e},c,u,{onChange:n,onBlur:a,InputProps:i(c)}))})),o)},d=n(41),v=n(15),h=n(7),b=n(49),g=n.n(b),O=function(e){for(var t=e,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.forEach((function(e){t=t.replace("{".concat(e.key,"}"),e.value)})),t},j="\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",x="\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0431\u043e\u043b\u0435\u0435 {minLength} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",E="\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0434\u043e {maxLength} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",y="\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 {minLength} \u0434\u043e {maxLength} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",k="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 Email",w="\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043d\u0438\u0436\u0435 {min} \u0438 \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 {max}",L="\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0438\u0435 \u0447\u0435\u043c {min}",_="\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c {max}",A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,a="",r=t.validation;return r&&(r.require&&(e.trim()||(n=!0,a=j)),r.minLength&&r.maxLength?(e.trim().length<r.minLength||e.trim().length>r.maxLength)&&(n=!0,a=O(y,{key:"minLength",value:r.minLength},{key:"maxLength",value:r.maxLength})):r.minLength?e.trim().length<r.minLength&&(n=!0,a=O(x,{key:"minLength",value:r.minLength})):r.maxLength&&e.trim().length>r.maxLength&&(n=!0,a=O(E,{key:"maxLength",value:r.maxLength})),g.a.number(+e)&&e&&(r.min&&r.max?(+e<r.min||+e>r.max)&&(n=!0,a=O(w,{key:"min",value:r.min},{key:"max",value:r.max})):r.min?+e<r.min&&(n=!0,a=O(L,{key:"min",value:r.min})):r.max&&+e>r.max&&(n=!0,a=O(_,{key:"max",value:r.max}))),r.email&&g.a.not.email(e)&&(n=!0,a=k)),Object(h.a)(Object(h.a)({},t),{},{error:n,helperText:a,value:e})},D=n(8),S=n.n(D),P=n(10),N=function(e,t){var n=t.max,a=t.min;return new Promise((function(t,r){var c=new Image;c.src=e,c.onload=function(){!c.width||!c.width||c.width>n||c.width<a||c.height>n||c.height<a?r():t()}}))},U=["image/jpeg","image/jpg","image/png"],T=function(e){return new Promise((function(t,n){if(e.target.files&&e.target.files[0]){var a=new FileReader,r=e.target.files[0].type;if(U.some((function(e){return e===r}))){a.readAsDataURL(e.target.files[0]);var c=e.target.files[0];a.onload=function(){var e=Object(P.a)(S.a.mark((function e(a){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.target.result,e.prev=1,e.next=4,N(r,{min:200,max:4e3});case 4:t([c,r]),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(new Error("size error: width and hight must be between 200px and 4000px"));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}else n(new Error("invalid file type: allowed types ".concat(U.join(","))))}else n(new Error("error"))}))},I=n(91),C=n(90),R=function(e,t,n){var a=Object(I.a)(RegExp,Object(C.a)(n));return!e||a.test(e)?e:t};function B(e){return{type:"ALERT_ON",payload:Object(h.a)(Object(h.a)({},e),{},{touchedTime:Date.now()})}}var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};Object.keys(e).forEach((function(a){n[a]=Object(h.a)(Object(h.a)({},e[a]),{},{value:t[a]||""})}));var r=Object(a.useState)(n),c=Object(v.a)(r,2),o=c[0],i=c[1],s=Object(u.c)(),l=function(){s(B({message:"\u0424\u043e\u0440\u043c\u0430 \u043d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u0430!"}))},p=function(e,t){switch(e){case"discountPercent":t.trim()&&o.discountExpirationDate&&!0===o.discountExpirationDate.disabled?i((function(e){return Object(h.a)(Object(h.a)({},e),{},{discountExpirationDate:Object(h.a)(Object(h.a)({},e.discountExpirationDate),{},{disabled:!1,hidden:!1,validation:{require:!0}})})})):!t.trim()&&o.discountExpirationDate&&!1===o.discountExpirationDate.disabled&&i((function(e){return Object(h.a)(Object(h.a)({},e),{},{discountExpirationDate:Object(h.a)(Object(h.a)({},e.discountExpirationDate),{},{disabled:!0,validation:null,hidden:!0,value:""})})}))}},m=function(e){var t=e.target,n=t.name,a=t.value;i((function(e){var t=e[n].pattern?R(a,e[n].value,e[n].pattern):a;return Object(h.a)(Object(h.a)({},e),{},Object(d.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},{value:t,error:!1,helperText:""})))})),p(n,a)},f=function(e){var t=e.target,n=t.name,a=t.value;i((function(e){var t=A(a,e[n]);return Object(h.a)(Object(h.a)({},e),{},Object(d.a)({},n,t))}))},b=function(){var e;return i((function(t){var n=Object.keys(t).reduce((function(e,n){return Object(h.a)(Object(h.a)({},e),{},Object(d.a)({},n,A(t[n].value,t[n])))}),{});return e=Object.keys(n).some((function(e){return n[e].error})),n})),e?(l(),!1):Object.keys(o).reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),{},Object(d.a)({},t,o[t].value||""))}),{})};return{form:o,getFormData:b,onChange:m,onBlur:f}},z=n(44),G=n(45),$=n(61),H=n.n($),K="https://identitytoolkit.googleapis.com/v1/",W={registration:"".concat(K,"accounts:signUp"),login:"".concat(K,"accounts:signInWithPassword")},q=function(){function e(){Object(z.a)(this,e)}return Object(G.a)(e,null,[{key:"auth",value:function(){var e=Object(P.a)(S.a.mark((function e(t,n,a){var r,c,o,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={email:t,password:n,returnSecureToken:!0},c="".concat(W[a],"?key=").concat("AIzaSyA64eAuK6OprCn3AcRrMR-lNfhcjoQ3DKA"),e.next=4,H.a.post(c,r);case 4:return o=e.sent,u=o.data,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}();function M(e){return localStorage.setItem("token",e),{type:"AUTH_LOGIN_SUCCESS",payload:e}}function J(){return localStorage.removeItem("token"),{type:"AUTH_LOGOUT"}}function Q(e,t,n){return function(){var a=Object(P.a)(S.a.mark((function a(r){var c,o;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,q.auth(e,t,n);case 3:c=a.sent,o=c.idToken,r(M(o)),a.next=14;break;case 8:throw a.prev=8,a.t0=a.catch(0),r(B({message:"login"===n?"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})),r(J()),a.t0;case 14:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}var V="login",X="registration",Y={email:{type:"text",name:"email",label:"email",value:"",validation:{email:!0}},password:{type:"password",name:"password",label:"password",value:"",validation:{minLength:8,maxLength:20}}};n(130);var Z=Object(u.b)(null,(function(e){return{onLogout:function(){return e(J())}}}))((function(e){var t=e.onLogout,n=F(Y),c=n.form,o=n.getFormData,i=n.onChange,p=n.onBlur,m=function(){var e=Object(s.g)(),t=Object(u.c)(),n=Object(a.useState)(V),r=Object(v.a)(n,2),c=r[0],o=r[1];return{authType:c,sendData:function(){var n=Object(P.a)(S.a.mark((function n(a){var r,o;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.email,o=a.password,n.prev=1,n.next=4,t(Q(r,o,c));case 4:e.push("/"),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}(),changeAuthType:function(){o((function(e){return e===V?X:V}))}}}(),d=m.authType,h=m.changeAuthType,b=m.sendData;Object(a.useEffect)((function(){t()}),[t]);var g=r.a.createElement("h2",null,"login"===d?"\u0412\u0445\u043e\u0434":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),O=r.a.createElement(l.a,{color:"primary",type:"button",onClick:h},"login"===d?"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0432\u043e\u0439\u0442\u0438"),j=r.a.createElement(l.a,{variant:"contained",color:"primary",type:"submit"},"login"===d?"\u0412\u0445\u043e\u0434":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f");return r.a.createElement("div",{className:"auth"},r.a.createElement("div",{className:"auth__form-wrapper"},g,r.a.createElement(f,{form:c,onSubmit:function(e){e.preventDefault();var t=o();t&&b(t)},onChange:i,onBlur:p},r.a.createElement("div",{className:"auth__footer"},O,j))))})),ee=n(188),te=n(85),ne=n.n(te),ae={title:{type:"text",name:"title",label:"Title",value:"",validation:{require:!0,minLength:20,maxLength:60}},description:{type:"text",name:"description",label:"description",multiline:!0,rows:4,value:"",validation:{maxLength:200}},coast:{type:"text",name:"coast",label:"coast",value:"",prefix:"$",pattern:["^(?=.*\\d)\\d*(?:\\.\\d{0,2})?$","g"],validation:{require:!0,min:0,max:99999999.99}},discountPercent:{type:"text",name:"discountPercent",label:"discount",prefix:"%",value:"",pattern:["^[0-9]+$","g"],validation:{min:10,max:90}},discountExpirationDate:{hidden:!0,disabled:!0,prefix:" ",type:"date",name:"discountExpirationDate",label:"discount Expiration Date",value:""}};n(131);var re=Object(u.b)(null,(function(e){return{propAlertOpen:function(t){return e(B(t))}}}))((function(e){var t=e.propAlertOpen,n=e.pageData,c=void 0===n?{}:n,o=e.imageUrl,u=void 0===o?"":o,i=e.isLoading,s=e.sendData,p=F(ae,c),m=p.form,d=p.getFormData,h=p.onChange,b=p.onBlur,g=Object(a.useRef)(null),O=Object(a.useState)(null),j=Object(v.a)(O,2),x=j[0],E=j[1],y=Object(a.useState)([null,u]),k=Object(v.a)(y,2),w=Object(v.a)(k[0],2),L=w[0],_=w[1],A=k[1],D=function(){var e=Object(P.a)(S.a.mark((function e(n){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(Date.now()),e.prev=1,e.next=4,T(n);case 4:a=e.sent,A(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),r=e.t0.message,t({message:r});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),N=i&&r.a.createElement(ee.a,{className:"g-spiner"});return r.a.createElement(r.a.Fragment,null,N,r.a.createElement("div",{className:"create-product"},r.a.createElement("div",{className:"create-product__form-wrapper"},r.a.createElement(f,{form:m,onSubmit:function(e){e.preventDefault();var n=d();n&&_?s(n,L):_||t({message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e"})},onChange:h,onBlur:b},r.a.createElement("input",{className:"create-product__file-input",type:"file",onChange:D,accept:"image/*",ref:g,key:x}),_&&r.a.createElement("img",{alt:"candidate",className:"create-product__image",src:_}),r.a.createElement(l.a,{variant:"contained",color:"primary",component:"span",onClick:function(){return g.current.click()},startIcon:r.a.createElement(ne.a,null)},_?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e"),r.a.createElement("div",{className:"create-product__footer"},r.a.createElement(l.a,{variant:"contained",color:"primary",type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))))})),ce=n(86).initializeApp({apiKey:"AIzaSyA64eAuK6OprCn3AcRrMR-lNfhcjoQ3DKA",storageBucket:"gs://cleverod-test.appspot.com"}).storage().ref(),oe=function(){function e(){Object(z.a)(this,e)}return Object(G.a)(e,null,[{key:"loadImage",value:function(){var e=Object(P.a)(S.a.mark((function e(t){var n,a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="image-".concat(Date.now(),"-").concat(t.name),a=ce.child(n),e.next=4,a.put(t);case 4:return r=e.sent,e.abrupt("return",r.metadata.fullPath);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeImage",value:function(){var e=Object(P.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce.child(t).delete();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceImage",value:function(){var e=Object(P.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&this.removeImage(t),e.next=3,this.loadImage(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getImage",value:function(){var e=Object(P.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.child(t).getDownloadURL();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ue="/products/",ie=".json",se=H.a.create({baseURL:"https://cleverod-test.firebaseio.com/"}),le=function(){function e(){Object(z.a)(this,e)}return Object(G.a)(e,null,[{key:"parseProductsList",value:function(){var e=Object(P.a)(S.a.mark((function e(t){var n,a,r,c,o,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=Object.keys(t),r=0;case 3:if(!(r<a.length)){e.next=13;break}return c=a[r],o=t[c],e.next=8,oe.getImage(o.photoUrL);case 8:u=e.sent,n.push(Object(h.a)(Object(h.a)({},o),{},{id:c,originPhotoUrl:o.photoUrL,photoUrL:u}));case 10:r++,e.next=3;break;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProductsList",value:function(){var e=Object(P.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.get(ue+ie);case 2:return t=e.sent,n=t.data,e.next=6,this.parseProductsList(n||{});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createProduct",value:function(){var e=Object(P.a)(S.a.mark((function e(t,n){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.loadImage(n);case 2:return a=e.sent,r=Object(h.a)(Object(h.a)({},t),{},{photoUrL:a}),e.next=6,se.post(ue+ie,r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getProductById",value:function(){var e=Object(P.a)(S.a.mark((function e(t){var n,a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.get(ue+t+ie);case 2:return n=e.sent,a=n.data,e.next=6,oe.getImage(a.photoUrL);case 6:return r=e.sent,e.abrupt("return",Object(h.a)(Object(h.a)({},a),{},{originPhotoUrl:a.photoUrL,photoUrL:r}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateProduct",value:function(){var e=Object(P.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se.patch(ue+n+ie,t);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeProductById",value:function(){var e=Object(P.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&oe.removeImage(n),e.next=3,se.delete(ue+t+ie);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),pe=Object(s.h)((function(e){var t=function(e){var t=Object(a.useState)({}),n=Object(v.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(""),u=Object(v.a)(o,2),i=u[0],l=u[1],p=Object(a.useState)(!1),m=Object(v.a)(p,2),f=m[0],d=m[1],b=Object(a.useState)(!1),g=Object(v.a)(b,2),O=g[0],j=g[1],x=Object(a.useState)(""),E=Object(v.a)(x,2),y=E[0],k=E[1],w=Object(s.g)(),L=function(){var t=Object(P.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,t.next=4,le.getProductById(e);case 4:n=t.sent,c(n),l(n.photoUrL),k(n.originPhotoUrl);case 8:return t.prev=8,d(!1),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[1,,8,11]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=Object(P.a)(S.a.mark((function t(n,a){var r,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!O){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,j(!0),!a||!i){t.next=10;break}return t.next=7,oe.replaceImage(y,a);case 7:r=t.sent,t.next=14;break;case 10:if(!a){t.next=14;break}return t.next=13,oe.loadImage(a);case 13:r=t.sent;case 14:return c=Object(h.a)({},n),r&&(c.photoUrL=r),t.next=18,le.updateProduct(c,e);case 18:setTimeout((function(){w.push("/")}),2e3);case 19:return t.prev=19,j(!1),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[2,,19,22]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){L()}),[]),{productData:r,photoUrL:i,isLoading:f,isSaving:O,saveProduct:_}}(e.match.params.id),n=t.productData,c=t.photoUrL,o=t.isLoading,u=t.isSaving,i=t.saveProduct;return r.a.createElement("div",null,o?r.a.createElement(ee.a,{className:"g-spiner"}):r.a.createElement(re,{pageData:n,imageUrl:c,isLoading:u,sendData:i}))})),me=function(){var e=function(){var e=Object(a.useState)(!1),t=Object(v.a)(e,2),n=t[0],r=t[1],c=Object(s.g)();return{sendData:function(){var e=Object(P.a)(S.a.mark((function e(t,a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,r(!0),e.next=6,le.createProduct(t,a);case 6:c.push("/");case 7:return e.prev=7,r(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[2,,7,10]])})));return function(t,n){return e.apply(this,arguments)}}(),isLoading:n}}(),t=e.sendData,n=e.isLoading;return r.a.createElement(re,{sendData:t,isLoading:n})},fe=n(190),de=n(189),ve=n(87),he=n.n(ve),be=n(88),ge=n.n(be),Oe=(n(143),function(e){var t=function(e,t,n){if(!n||!t||g.a.not.number(+e)||g.a.not.number(+t))return[e,null,null];var a=Date.now();if(new Date(n).valueOf()>a){var r=e-e/100*t;return[r=r.toFixed(2),e,n]}return[e,null,null]}(e.coast,e.discountPercent,e.discountExpirationDate),n=Object(v.a)(t,3),a=n[0],c=n[1],o=n[2],u=["coast__main"];return c&&u.push("coast__main--discount"),r.a.createElement("div",{className:"coast"},r.a.createElement("div",null,r.a.createElement("div",{className:u.join(" ")},a,"$"),c&&r.a.createElement("div",{className:"coast__old"},c,"$")),o&&r.a.createElement("span",{className:"coast__date"},"\u0434\u043e (",o,")"))}),je=(n(144),function(e){var t=e.title,n=e.description,a=e.photoUrL,c=e.coast,o=e.discountPercent,u=e.discountExpirationDate,i=e.onChange,s=e.onRemove,l=e.isAuth&&r.a.createElement("div",{className:"product-card__action"},r.a.createElement(de.a,{color:"primary",onClick:i},r.a.createElement(he.a,null)),r.a.createElement(de.a,{color:"primary",onClick:s},r.a.createElement(ge.a,null)));return r.a.createElement("div",{className:"product-card"},r.a.createElement("header",{className:"product-card__header"},r.a.createElement("h2",{className:"product-card__title"},t),r.a.createElement(Oe,{coast:c,discountExpirationDate:u,discountPercent:o})),r.a.createElement("img",{alt:t,src:a,className:"product-card__image"}),r.a.createElement("div",{className:"product-card__description"},n),l)});var xe=Object(u.b)((function(e){return{isAuth:!!e.auth.token}}))((function(e){var t=e.isAuth,n=function(){var e=Object(s.g)(),t=Object(a.useState)([]),n=Object(v.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),u=Object(v.a)(o,2),i=u[0],l=u[1],p=function(){var e=Object(P.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,le.getProductsList();case 4:t=e.sent,c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(P.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.removeProductById(t,n);case 2:p();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){p()}),[]),{isLoading:i,productList:r,openEditPage:function(t){e.push("/edit/"+t)},removeProduct:m}}(),c=n.productList,o=n.isLoading,u=n.removeProduct,i=n.openEditPage,l={xl:2,lg:3,md:4,sm:6,xs:12},p=o&&r.a.createElement(ee.a,{className:"g-spiner"});return r.a.createElement(r.a.Fragment,null,p,r.a.createElement(fe.a,{container:!0,spacing:3},c.map((function(e){return r.a.createElement(fe.a,Object.assign({item:!0},l,{key:e.id}),r.a.createElement(je,Object.assign({},e,{isAuth:t,onChange:function(){return i(e.id)},onRemove:function(){return u(e.id,e.originPhotoUrl)}})))}))))})),Ee=n(197),ye=n(195);function ke(e){return r.a.createElement(ye.a,Object.assign({elevation:6,variant:"filled"},e))}var we=Object(u.b)((function(e){return Object(h.a)({},e.alert)}),(function(e){return{onClose:function(){return e((function(e){e({type:"ALERT_CLOSE"}),setTimeout((function(){e({type:"ALERT_CLEAR_MESSAGE"})}),500)}))}}}))((function(e){var t=e.type,n=void 0===t?"error":t,c=e.message,o=void 0===c?"":c,u=e.onClose,i=e.open,s=void 0!==i&&i,l=e.vertical,p=void 0===l?"top":l,m=e.horizontal,f=void 0===m?"center":m,d=e.touchedTime,h=Object(a.useState)(null),b=Object(v.a)(h,2),g=b[0],O=b[1];return Object(a.useEffect)((function(){clearTimeout(g),O(setTimeout(u,4e3))}),[d]),r.a.createElement(Ee.a,{open:s,autoHideDuration:6e3,anchorOrigin:{vertical:p,horizontal:f}},r.a.createElement(ke,{onClose:u,severity:n},o))})),Le=n(193),_e=n(192),Ae=n(191);n(145);var De=Object(u.b)((function(e){return{isAuth:!!e.auth.token}}))((function(e){var t=e.isAuth,n=[{to:"/",label:"\u0412\u0441\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"}];t&&n.push({to:"/create",label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0442"});var a={to:"/auth",label:t?"\u0412\u044b\u0445\u043e\u0434":"\u0412\u0445\u043e\u0434"};return r.a.createElement(Ae.a,{position:"fixed"},r.a.createElement(_e.a,{className:"navigation__container"},r.a.createElement("nav",null,n.map((function(e){return r.a.createElement(i.b,{className:"navigation__link",to:e.to,key:e.to},e.label)}))),r.a.createElement(i.b,{to:a.to,className:"navigation__link"},a.label)))})),Se=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(De,null),r.a.createElement(_e.a,null),r.a.createElement(Le.a,{maxWidth:!1,style:{paddingTop:20}},t))};var Pe=Object(u.b)((function(e){return{isAuth:!!e.auth.token}}),(function(e){return{propAutoLogin:function(){return e((function(e){var t=localStorage.getItem("token");e(t?M(t):J())}))}}}))((function(e){var t=e.isAuth,n=e.propAutoLogin;Object(a.useEffect)((function(){n()}),[t]);var c=[{path:"/",component:xe,exact:!0,isLayout:!0},{path:"/auth",component:Z}];if(t){var o=[{path:"/create",component:me,isLayout:!0},{path:"/edit/:id",component:pe,isLayout:!0}];c.push.apply(c,o)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,null),r.a.createElement(s.d,null,c.map((function(e){return r.a.createElement(s.b,{key:e.path,path:e.path,exact:e.exact,render:function(){return t=e.isLayout,n=e.component,t?r.a.createElement(Se,null,r.a.createElement(n,null)):r.a.createElement(n,null);var t,n}})})),r.a.createElement(s.a,{to:"/"})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(146);var Ne=n(40),Ue=n(89),Te={token:null};var Ie={open:!1,type:"error",vertical:"top",horizontal:"center",message:"",touchedTime:null};var Ce=Object(Ne.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_LOGIN_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{token:t.payload});case"AUTH_LOGOUT":return Object(h.a)(Object(h.a)({},e),{},{token:null});default:return Object(h.a)({},e)}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(h.a)({},Ie),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALERT_ON":return Object(h.a)(Object(h.a)({},e),{},{open:!0},t.payload);case"ALERT_CLOSE":return Object(h.a)(Object(h.a)({},Ie),{},{message:e.message});case"ALERT_CLEAR_MESSAGE":return Object(h.a)({},Ie);default:return Object(h.a)({},e)}}}),Re=Object(Ne.d)(Ce,Object(Ne.a)(Ue.a));o.a.render(r.a.createElement(u.a,{store:Re},r.a.createElement(i.a,null,r.a.createElement(Pe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);
//# sourceMappingURL=main.61d3e4a4.chunk.js.map